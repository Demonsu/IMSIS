<html>
<head>
<script style="text/javascript" src="assets/js/jquery.js"></script>
<script style="text/javascript" src="assets/plugin/highcharts/js/highcharts.js"></script>
<script style="text/javascript" src="assets/plugin/highcharts/js/modules/exporting.js"></script>

<script>
	$(document).ready(function(){
		$.ajax({
			type:'POST',
			url:'json/demo.json',
			success:function(data){
				var index = 1;
				//alert(data);
				var table = '';
				var i;
				for(i=0;i<data.content.length;i++){
					
					table += '<tr>';
					table += '<th></th>';
					table += '<th colspan="2">'+ data.content[i].title_effect + '</th>';
					table += '<th>得分</th>';
					table += '<th>加权得分</th>';
					table += '</tr>';

					var j;
					var item = data.content[i].effect_content;
					for(j=0;j<item.length;j++){
						table += '<tr>';
						table += '<td>' + item[j].id + '</td>';
						table += '<td>' + item[j].title_field + '</td>';
						table += '<td></td>';
						table += '<td></td>';
						table += '<td></td>';
						table += '</tr>';
						var k;
						var variable = item[j].field_content;
						for(k=0;k<variable.length;k++){
							table += '<tr>';
							table += '<td></td>';
							table += '<td style="text-align:right">' + index + '</td>';
							index++;
							table += '<td>' + variable[k].title_variable + '</td>';
							table += '<td>' + variable[k].score + '</td>';
							if(k==0)
								table += '<td rowspan="' + variable.length + '" style="text-align:right;">' + item[j].field_score + '</td>';
							table += '</tr>';
						}
					}
					table += '<tr><td></td><td></td><td></td><td></td><td></td></tr>';
					table += '<tr style="color:red">';
					table += '<td></td><td colspan="2">' + data.content[i].title_effect + '总均分</td><td></td><td style="text-align:right">' + data.content[i].effect_field_score + '</td>'
					table += '</tr>';
					
				}
				$('#t1').html(table);
				
			}
		});
		$.ajax({
			type:'POST',
			url:'json/demo.json',
			success:function(data){
				
				var table = '';
				var i;
				table += '<tr>';
				for(i=0;i<data.content.length;i++){
					table += '<th>' + data.content[i].title + '</th>';
				}
				table += '</tr>';
				for(i=0;i<data.content[0].content.length;i++){
					table += '<tr>';
					var j;
					for(j=0;j<data.content.length;j++){
						//alert(data.content[j].content[i]);
						if(j == 2)
							table += '<td>' + data.content[j].content[i] + '%</td>';
						else
							table += '<td>' + data.content[j].content[i] + '</td>';
					}
					table += '</tr>';
				}
				
				$('#t2').html(table);
				
				var array1 = new Array();
				for(i=0;i<data.content[0].content.length;i++){
					array1.push(data.content[0].content[i]);
				}
				
				var options = {
					chart: {
						renderTo:'container',
						type: 'bar'
					},
					title: {
						text: '2.关键变量统计分布'
					},
					subtitle: {
						text: '百分比率'
					},
					xAxis: {
						categories: [1,2,3,4,5],
						title: {
							text: null
						}
					},
					yAxis: {
						
						min: 0,
						max: 80,
						title: {
							text: '',
							align: 'high'
						},
						labels: {
							formatter:function(){                   
								return this.value + '%';
							},
							overflow: 'justify'
						}
						
					},
					tooltip: {
						valueSuffix: '%',
					},
					plotOptions: {
						bar: {
							dataLabels: {
								enabled: true
							}	
						}
					},
					legend: {
						layout: 'vertical',
						align: 'right',
						verticalAlign: 'top',
						x: -40,
						y: 100,
						floating: true,
						borderWidth: 1,
						backgroundColor: '#FFFFFF',
						shadow: true
					},
					credits: {
						enabled: false
					},
					series: []
					
				};
				
				options.series = new Array();
				options.series[0] = new Object();
				options.series[0].name = '关键变量';
				options.series[0].data = new Array();
				for(i=0;i<data.content[0].content.length;i++){
					options.series[0].data.push(parseFloat(data.content[2].content[i]));
				}
				//alert(options.series[0].data);
				var chart = new Highcharts.Chart(options);
				//$('#container').highcharts(options);
			}
			
			
		});
		$.ajax({
			type:'POST',
			url:'json/demo3.json',
			success:function(data){
				var table = '';
				var i;
				table += '<tr>';
				table += '<th>作用域（一级指标）</th><th>关键域（二级指标）</th><th>得分（半分制）</th>'
				table += '</tr>';
				for(i=0;i<data.content.length;i++){
					var j;
					for(j=0;j<data.content[i].content.length;j++){
						table += '<tr>';
						if(j==0)
							table += '<td>' + data.content[i].title + '</td>';
						else
							table += '<td></td>';
						table += '<td>' + data.content[i].content[j].title + '</td>';
						table += '<td style="text-align:center">' + data.content[i].content[j].content + '</td>';
						table += '</tr>';
					}
				}
				$('#t3').html(table);
				
			}
		});
		$.ajax({
			type:'POST',
			url:'json/demo4.json',
			success:function(data){
				
			}
		});
		
	});
</script>
<style>
th {
 font: bold 11px "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
 color: #4f6b72;
 border-right: 1px solid #C1DAD7;
 border-bottom: 1px solid #C1DAD7;
 border-top: 1px solid #C1DAD7;
 letter-spacing: 2px;
 text-transform: uppercase;
 text-align: left;
 padding: 6px 6px 6px 12px;
 background: #CAE8EA;
}
th.nobg {
 border-top: 0;
 border-left: 0;
 border-right: 1px solid #C1DAD7;
 background: none;
}
td {
 border-right: 1px solid #C1DAD7;
 border-bottom: 1px solid #C1DAD7;
 background: #fff;
 font-size:11px;
 padding: 6px 6px 6px 12px;
 color: #4f6b72;
}
td.alt {
 background: #F5FAFA;
 color: #797268;
}
th.spec {
 border-left: 1px solid #C1DAD7;
 border-top: 0;
 background: #fff;
 font: bold 10px "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
}
th.specalt {
 border-left: 1px solid #C1DAD7;
 border-top: 0;
 background: #f5fafa url(images/bullet2.gif) no-repeat;
 font: bold 10px "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
 color: #797268;
}
</style>
</head>
<body>
	<p>table1</p>
	<table id="t1">

	</table>
	<p>table2</p>
	<table id="t2">

	</table>
	<div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
	<p>table3</p>
	<table id="t3">

	</table>
	<p>table4</p>
	<table id="t4">

	</table>
	<p>table5</p>
	<table id="t5">

	</table>
	<p>table6</p>
	<table id="t6">

	</table>
	<p>table7</p>
	<table id="t7">

	</table>
	<p>table8</p>
	<table id="t8">

	</table>
	<p>table9</p>
	<table id="t9">

	</table>
	<p>table10</p>
	<table id="t10">

	</table>
	<p>table11</p>
	<table id="t11">

	</table>
	<p>table12</p>
	<table id="t12">

	</table>
	<p>table13</p>
	<table id="t13">

	</table>
	<p>table14</p>
	<table id="t14">

	</table>
</body>
</html>